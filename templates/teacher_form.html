<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–í–Ω–µ—Å–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö - –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ —è–∫–æ—Å—Ç—ñ –æ—Å–≤—ñ—Ç–∏</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <style>
        .teacher-form-wrapper {
            min-height: 100vh;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            flex-direction: column;
        }
        
        .teacher-form-header {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            padding: 1.5rem 2rem;
            color: white;
        }
        
        .teacher-form-header .header-wrapper {
            max-width: 1600px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 2rem;
        }
        
        .teacher-form-header h1 {
            font-size: 1.5rem;
            margin-bottom: 0.3rem;
        }
        
        .teacher-form-header h2 {
            font-size: 1rem;
            opacity: 0.9;
            margin-bottom: 0.3rem;
        }
        
        .teacher-form-header h3 {
            font-size: 1.1rem;
            margin-top: 0.5rem;
            font-weight: 600;
        }
        
        .header-actions {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 0.5rem;
        }
        
        .user-info {
            font-size: 0.95rem;
            opacity: 0.95;
        }
        
        .teacher-form-content {
            flex: 1;
            max-width: 1600px;
            margin: 2rem auto;
            padding: 0 1rem;
            width: 100%;
        }
        
        .form-card-compact {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            animation: slideUp 0.5s ease;
        }
        
        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .teacher-form-footer {
            background: rgba(0, 0, 0, 0.3);
            color: white;
            text-align: center;
            padding: 1.5rem;
            margin-top: auto;
        }
        
        @media (max-width: 768px) {
            .teacher-form-header .header-wrapper {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .header-actions {
                width: 100%;
                align-items: flex-start;
            }
            
            .teacher-form-header h1 {
                font-size: 1.2rem;
            }
            
            .teacher-form-header h2 {
                font-size: 0.9rem;
            }
            
            .form-card-compact {
                padding: 1.5rem;
            }

            /* –°—Ç–∏–ª—ñ –¥–ª—è –Ω/–∞ –∫–æ–ª–æ–Ω–∫–∏ */
            .na-level {
                background: #f3f4f6 !important;
                color: #6b7280;
                font-weight: 600;
                border-left: 3px solid #9ca3af !important;
            }
            
            .na-cell {
                background: #fafafa;
                border-left: 3px solid #d1d5db !important;
            }
            
            .na-cell input {
                border-color: #d1d5db;
                background: white;
            }
            
            .na-cell input:focus {
                border-color: #9ca3af;
                background: #fefefe;
            }
            
            @media (max-width: 768px) {
                .na-level small {
                    display: block;
                    font-size: 0.7rem;
                }
            }

        }
    </style>
</head>
<body>
    <div class="teacher-form-wrapper">
        <header class="teacher-form-header">
            <div class="header-wrapper">
                <div class="header-info">
                    <h1>–ö–æ–ª–æ–º–∏–π—Å—å–∫–∏–π –ª—ñ—Ü–µ–π "–ö–æ–ª–æ–º–∏–π—Å—å–∫–∞ –≥—ñ–º–Ω–∞–∑—ñ—è —ñ–º–µ–Ω—ñ –ú–∏—Ö–∞–π–ª–∞ –ì—Ä—É—à–µ–≤—Å—å–∫–æ–≥–æ"</h1>
                    <h2>–ö–æ–ª–æ–º–∏–π—Å—å–∫–æ—ó –º—ñ—Å—å–∫–æ—ó —Ä–∞–¥–∏ –Ü–≤–∞–Ω–æ-–§—Ä–∞–Ω–∫—ñ–≤—Å—å–∫–æ—ó –æ–±–ª–∞—Å—Ç—ñ</h2>
                    <h3>üìä –ú–û–ù–Ü–¢–û–†–ò–ù–ì –Ø–ö–û–°–¢–Ü –û–°–í–Ü–¢–ò - –í–ù–ï–°–ï–ù–ù–Ø –î–ê–ù–ò–•</h3>
                </div>
                <div class="header-actions">
                    <div class="user-info">–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á: <strong>{{ teacher_name }}</strong></div>
                    <div style="display: flex; gap: 0.5rem;">
                        {% if session.available_roles and session.available_roles|length > 1 %}
                        <a href="{{ url_for('mode_selection') }}" class="btn btn-primary btn-sm">–ó–º—ñ–Ω–∏—Ç–∏ —Ä–µ–∂–∏–º</a>
                        {% endif %}
                        <a href="{{ url_for('logout') }}" class="btn btn-secondary btn-sm">–í–∏–π—Ç–∏</a>
                    </div>
                </div>
            </div>
        </header>
        
        <main class="teacher-form-content">
            <div class="form-card-compact">
                <form id="monitoringForm">
                    <!-- –ö–æ–º–ø–∞–∫—Ç–Ω–∞ —Å—ñ—Ç–∫–∞ –≤–∏–±–æ—Ä—É –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤ -->
                    <div class="selection-grid">
                        <div class="form-group-inline">
                            <label for="year">–ù–∞–≤—á–∞–ª—å–Ω–∏–π —Ä—ñ–∫ *</label>
                            <select id="year" name="year" required>
                                <option value="">–û–±–µ—Ä—ñ—Ç—å —Ä—ñ–∫</option>
                                {% for year in academic_years %}
                                <option value="{{ year }}">{{ year }}</option>
                                {% endfor %}
                            </select>
                        </div>

                        <div class="form-group-inline">
                            <label for="semester">–°–µ–º–µ—Å—Ç—Ä *</label>
                            <select id="semester" name="semester" required>
                                <option value="1">I —Å–µ–º–µ—Å—Ç—Ä</option>
                                <option value="2">II —Å–µ–º–µ—Å—Ç—Ä</option>
                            </select>
                        </div>
                        
                        <div class="form-group-inline">
                            <label for="class">–ö–ª–∞—Å *</label>
                            <select id="class" name="class" required disabled>
                                <option value="">–°–ø–æ—á–∞—Ç–∫—É –æ–±–µ—Ä—ñ—Ç—å —Ä—ñ–∫</option>
                            </select>
                        </div>
                        
                        <div class="form-group-inline">
                            <label for="subject">–ü—Ä–µ–¥–º–µ—Ç *</label>
                            <select id="subject" name="subject" required disabled>
                                <option value="">–°–ø–æ—á–∞—Ç–∫—É –æ–±–µ—Ä—ñ—Ç—å –∫–ª–∞—Å</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- –ü—Ä–∏—Ö–æ–≤–∞–Ω–∏–π input –¥–ª—è –≤—á–∏—Ç–µ–ª—è -->
                    <input type="hidden" id="teacher" name="teacher" value="{{ teacher_name }}">
                    
                    <!-- –ö–Ω–æ–ø–∫–∞ —Å–∫–∏–¥–∞–Ω–Ω—è —Ñ—ñ–ª—å—Ç—Ä—ñ–≤ -->
                    <div style="text-align: right; margin-top: 1rem;">
                        <button type="button" id="resetFiltersBtn" class="btn btn-secondary btn-sm">üîÑ –°–∫–∏–Ω—É—Ç–∏ —Ñ—ñ–ª—å—Ç—Ä–∏</button>
                    </div>
                    
                    <!-- –î–∞–Ω—ñ –¥–ª—è –æ–±—Ä–∞—Ö—É–Ω–∫—É -->
                    <div class="data-section-compact" id="dataSection" style="display: none;">
                        <div class="section-header">
                            <h3>–î–∞–Ω—ñ –¥–ª—è –æ–±—Ä–∞—Ö—É–Ω–∫—É</h3>
                            <div class="student-count-inline">
                                <label>–ö—ñ–ª—å–∫—ñ—Å—Ç—å —É—á–Ω—ñ–≤: 
                                    <small style="font-weight: normal; opacity: 0.8;">(–∑–º—ñ–Ω—ñ—Ç—å –ø—Ä–∏ –ø–æ–¥—ñ–ª—ñ –Ω–∞ –≥—Ä—É–ø–∏)</small>
                                </label>
                                <input type="number" id="studentCount" min="1" max="50" required placeholder="–í–≤–µ–¥—ñ—Ç—å –∫—ñ–ª—å–∫—ñ—Å—Ç—å">
                            </div>
                        </div>

                        <!-- ‚úÖ –î–û–î–ê–¢–ò –¶–ï: –ü—ñ–¥–∫–∞–∑–∫–∞ –ø—Ä–æ –ø–æ–¥—ñ–ª –Ω–∞ –≥—Ä—É–ø–∏ -->
                        <div id="divisionHint" style="display: none; margin: 1rem 0; padding: 1rem; background: linear-gradient(135deg, #fff3cd, #fde68a); border-left: 5px solid #f59e0b; border-radius: 12px; color: #92400e; font-size: 0.95rem; animation: slideDown 0.3s ease;">
                            <strong>‚ö†Ô∏è –£–≤–∞–≥–∞!</strong> –¶–µ–π –ø—Ä–µ–¥–º–µ—Ç –∑–∞–∑–≤–∏—á–∞–π –º–∞—î –ø–æ–¥—ñ–ª –Ω–∞ –≥—Ä—É–ø–∏. 
                            <br>
                            –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—å, —â–æ –≤–∏ –≤–∫–∞–∑–∞–ª–∏ –∫—ñ–ª—å–∫—ñ—Å—Ç—å —É—á–Ω—ñ–≤ <strong>—Å–∞–º–µ —É –≤–∞—à—ñ–π –≥—Ä—É–ø—ñ</strong>, –∞ –Ω–µ –∑–∞–≥–∞–ª—å–Ω—É –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ø–æ –∫–ª–∞—Å—É.
                        </div>
                        
                        <!-- –¢–∞–±–ª–∏—Ü—è –æ—Ü—ñ–Ω–æ–∫ -->
                        <div class="grades-table-compact">
                            <h4>–£—Å–ø—ñ—à–Ω—ñ—Å—Ç—å –∑–∞ –≥—Ä—É–ø–∞–º–∏ –æ—Ü—ñ–Ω–æ–∫ <small>(–≤–≤–µ–¥—ñ—Ç—å –∫—ñ–ª—å–∫—ñ—Å—Ç—å —É—á–Ω—ñ–≤)</small></h4>
                            <div class="scroll-hint">üëÜ –ü—Ä–æ–≥–æ—Ä—Ç–∞–π—Ç–µ —Ç–∞–±–ª–∏—Ü—é –≤–ª—ñ–≤–æ-–≤–ø—Ä–∞–≤–æ ‚Üí</div>
                            
                            <table>
                                <thead>
                                    <tr>
                                        <th colspan="3" class="high-level">–≤–∏—Å–æ–∫–∏–π —Ä—ñ–≤–µ–Ω—å</th>
                                        <th colspan="3" class="sufficient-level">–¥–æ—Å—Ç–∞—Ç–Ω—ñ–π —Ä—ñ–≤–µ–Ω—å</th>
                                        <th colspan="3" class="average-level">—Å–µ—Ä–µ–¥–Ω—ñ–π —Ä—ñ–≤–µ–Ω—å</th>
                                        <th colspan="3" class="initial-level">–ø–æ—á–∞—Ç–∫–æ–≤–∏–π —Ä—ñ–≤–µ–Ω—å</th>
                                        <th class="na-level" style="background: #f3f4f6; color: #6b7280; border-left: 3px solid #9ca3af;">
                                            –Ω/–∞<br><small style="font-size: 0.7rem;">(–Ω–µ –∞—Ç–µ—Å—Ç.)</small>
                                        </th>
                                    </tr>
                                    <tr>
                                        <th>"12"</th>
                                        <th>"11"</th>
                                        <th>"10"</th>
                                        <th>"9"</th>
                                        <th>"8"</th>
                                        <th>"7"</th>
                                        <th>"6"</th>
                                        <th>"5"</th>
                                        <th>"4"</th>
                                        <th>"3"</th>
                                        <th>"2"</th>
                                        <th>"1"</th>
                                        <th style="background: #f9fafb; color: #6b7280; border-left: 3px solid #d1d5db;">–Ω/–∞</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><input type="number" id="grade12" min="0" value="0"></td>
                                        <td><input type="number" id="grade11" min="0" value="0"></td>
                                        <td><input type="number" id="grade10" min="0" value="0"></td>
                                        <td><input type="number" id="grade9" min="0" value="0"></td>
                                        <td><input type="number" id="grade8" min="0" value="0"></td>
                                        <td><input type="number" id="grade7" min="0" value="0"></td>
                                        <td><input type="number" id="grade6" min="0" value="0"></td>
                                        <td><input type="number" id="grade5" min="0" value="0"></td>
                                        <td><input type="number" id="grade4" min="0" value="0"></td>
                                        <td><input type="number" id="grade3" min="0" value="0"></td>
                                        <td><input type="number" id="grade2" min="0" value="0"></td>
                                        <td><input type="number" id="grade1" min="0" value="0"></td>
                                        <td style="background: #fafafa; border-left: 3px solid #d1d5db;">
                                            <input type="number" id="gradeNA" min="0" value="0" style="border-color: #d1d5db;">
                                        </td>
                                    </tr>
                                    <tr class="percentage-row">
                                        <td id="percent12">0%</td>
                                        <td id="percent11">0%</td>
                                        <td id="percent10">0%</td>
                                        <td id="percent9">0%</td>
                                        <td id="percent8">0%</td>
                                        <td id="percent7">0%</td>
                                        <td id="percent6">0%</td>
                                        <td id="percent5">0%</td>
                                        <td id="percent4">0%</td>
                                        <td id="percent3">0%</td>
                                        <td id="percent2">0%</td>
                                        <td id="percent1">0%</td>
                                        <td id="percentNA" style="background: #fafafa; color: #6b7280; border-left: 3px solid #d1d5db;">0%</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—ñ–≤ - –∫–æ–º–ø–∞–∫—Ç–Ω–æ -->
                        <div class="results-section-compact">
                            <h4>–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫–∏</h4>
                            
                            <div class="results-grid">
                                <div class="result-item">
                                    <span class="result-label">–°–µ—Ä–µ–¥–Ω—ñ–π –±–∞–ª:</span>
                                    <span class="result-value" id="avgScore">0</span>
                                </div>
                                <div class="result-item">
                                    <span class="result-label">–°—Ç—É–ø—ñ–Ω—å –Ω–∞–≤—á–µ–Ω–æ—Å—Ç—ñ:</span>
                                    <span class="result-value" id="learningLevel">0%</span>
                                </div>
                                <div class="result-item wide">
                                    <span class="result-label">–†—ñ–≤–µ–Ω—å:</span>
                                    <span class="result-value-text" id="learningLevelText">-</span>
                                </div>
                                <div class="result-item">
                                    <span class="result-label">–ö–Ø–ó:</span>
                                    <span class="result-value" id="qualityCoeff">0%</span>
                                </div>
                                <div class="result-item">
                                    <span class="result-label">–Ø–ó:</span>
                                    <span class="result-value" id="qualityPercent">0%</span>
                                </div>
                                <div class="result-item">
                                    <span class="result-label">–ö–†:</span>
                                    <span class="result-value" id="resultCoeff">0%</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-actions-compact">
                            <button type="button" id="calculateBtn" class="btn btn-primary">–†–æ–∑—Ä–∞—Ö—É–≤–∞—Ç–∏</button>
                            <button type="submit" class="btn btn-success">–ó–±–µ—Ä–µ–≥—Ç–∏</button>
                            <button type="button" id="exportTeacherBtn" class="btn btn-info">üì• –ï–∫—Å–ø–æ—Ä—Ç –≤ Excel</button>
                            <button type="button" id="clearDataBtn" class="btn btn-secondary">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç–∏ –¥–∞–Ω—ñ</button>
                        </div>
                    </div>
                </form>
                
                <div id="message" class="message" style="display: none;"></div>
            </div>
        </main>
        
        <footer>
            <p>–ö–æ–ª–æ–º–∏–π—Å—å–∫–∏–π –ª—ñ—Ü–µ–π "–ö–æ–ª–æ–º–∏–π—Å—å–∫–∞ –≥—ñ–º–Ω–∞–∑—ñ—è —ñ–º–µ–Ω—ñ –ú–∏—Ö–∞–π–ª–∞ –ì—Ä—É—à–µ–≤—Å—å–∫–æ–≥–æ" ¬© 2025</p>
            <p style="margin-top: 0.5rem; font-size: 0.9rem; opacity: 0.85;">
                üíª –†–æ–∑—Ä–æ–±–ª–µ–Ω–æ <strong>–¶–µ–Ω—Ç—Ä–æ–º –ø—Ä–æ—Ñ–µ—Å—ñ–π–Ω–æ–≥–æ —Ä–æ–∑–≤–∏—Ç–∫—É –ø–µ–¥–∞–≥–æ–≥—ñ—á–Ω–∏—Ö –ø—Ä–∞—Ü—ñ–≤–Ω–∏–∫—ñ–≤<br>–ö–æ–ª–æ–º–∏–π—Å—å–∫–æ—ó –º—ñ—Å—å–∫–æ—ó —Ä–∞–¥–∏</strong>
            </p>
            <p style="margin-top: 0.25rem; font-size: 0.75rem; opacity: 0.7;">
                v1.2.0 | –û–Ω–æ–≤–ª–µ–Ω–æ: 27.12.2024
            </p>
        </footer>
    </div>
    
    <script src="{{ url_for('static', filename='js/monitoring.js') }}"></script>
</body>
</html>